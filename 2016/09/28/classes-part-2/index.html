<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Keeping it Classy, Part 2 of 2 - Ivey Topaz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The Power to CreateIn the last post we covered functional class instatiation, and touched on how to save memory when instatiating a large number of objects. Let’s pursue that further, and get into th">
<meta property="og:type" content="article">
<meta property="og:title" content="Keeping it Classy, Part 2 of 2">
<meta property="og:url" content="http://iveytopaz.com/2016/09/28/classes-part-2/index.html">
<meta property="og:site_name" content="Ivey Topaz">
<meta property="og:description" content="The Power to CreateIn the last post we covered functional class instatiation, and touched on how to save memory when instatiating a large number of objects. Let’s pursue that further, and get into th">
<meta property="og:image" content="http://iveytopaz.com/imgs/classes2.jpg">
<meta property="og:updated_time" content="2017-01-11T09:50:46.898Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Keeping it Classy, Part 2 of 2">
<meta name="twitter:description" content="The Power to CreateIn the last post we covered functional class instatiation, and touched on how to save memory when instatiating a large number of objects. Let’s pursue that further, and get into th">
<meta name="twitter:image" content="http://iveytopaz.com/imgs/classes2.jpg">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-86356826-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics --><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://iveytopaz.com"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer"><article id="post-classes-part-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Keeping it Classy, Part 2 of 2
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2016/09/28/classes-part-2/" class="article-date">
  <time datetime="2016-09-28T04:00:00.000Z" itemprop="datePublished">09-28-2016</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/imgs/classes2.jpg" alt="Turning the classiness up to 11"></p>
<h3 id="The-Power-to-Create"><a href="#The-Power-to-Create" class="headerlink" title="The Power to Create"></a>The Power to Create</h3><p>In the last post we covered functional class instatiation, and touched on how to save memory when instatiating a large number of objects. Let’s pursue that further, and get into the Object.create method.</p>
<a id="more"></a>
<h2 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create"></a>Object.create</h2><p>In the last post we were looking at the following code: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span>(<span class="params">color, doors, seats</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> car = <span class="built_in">Object</span>.create(carMethods);</div><div class="line"></div><div class="line">  car.color = color;</div><div class="line">  car.doors = doors;</div><div class="line">  car.seats = seats;</div><div class="line">  car.wheels = <span class="number">4</span>;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> car</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> carMethods = &#123;&#125;;</div><div class="line"></div><div class="line">carMethods.startEngine = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Vrooomm vrooomm'</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// Calling the function</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> blackSedan = Car(<span class="string">'black'</span>, <span class="number">2</span>, <span class="number">4</span>);</div></pre></td></tr></table></figure>
<p>This is a (verbose) way of creating a memory-saving Car Class. The methods for car are separated out into the carMethods object. When Oject.create is called, it sets carMethods as the prototype for each instance of car. This means failed look ups to properties and methods on car will delegate to carMethods. Thus, if we create a car variable, and call car.startEngine, the JavaScript engine will not find this method on car, and will delegate the look up to carMethods. It will find the specified method on carMethods, so ‘Vrooomm vrooomm’ gets logged to the console.</p>
<p>The key point here is that Object.create allows failed lookups on car to fall through to carMethods. Only one instance of the function stored in carMethods.startEngine is created, so we use less memory than in the functional style.</p>
<h3 id="Pseudoclassical-Instatiation"><a href="#Pseudoclassical-Instatiation" class="headerlink" title="Pseudoclassical Instatiation"></a>Pseudoclassical Instatiation</h3><p>Now that we understand the purpose of Object.create, we can move on to pseudoclassical instatiation. Here’s our car class in the pseudoclassical style: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span>(<span class="params">color, doors, seats</span>) </span>&#123;</div><div class="line"> </div><div class="line">  <span class="keyword">this</span>.color = color;</div><div class="line">  <span class="keyword">this</span>.doors = doors;</div><div class="line">  <span class="keyword">this</span>.seats = seats;</div><div class="line">  <span class="keyword">this</span>.wheels = <span class="number">4</span>;</div><div class="line"></div><div class="line">&#125;;</div><div class="line"></div><div class="line">Car.prototype.startEngine = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Vrooomm vrooomm'</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// Calling the function</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> blackSedan = <span class="keyword">new</span> Car(<span class="string">'black'</span>, <span class="number">2</span>, <span class="number">4</span>)</div></pre></td></tr></table></figure>
<p>There’s a few differences to note here. All of the changes stem from using the keyword new to create a car. Javascript will now do the work of Object.create at the beginning of the function. Failed lookups on each car will delegate to the Car prototype (previously refered to as carMethods). The new keyword also returns the instance of Car from the function for us, so those two lines can be omitted from the funciton definition. It also binds the keyword this to the newly created Car instance, so we refer to the target object of the method or property through this.</p>
<h2 id="Subclasses-in-Pseudoclassical"><a href="#Subclasses-in-Pseudoclassical" class="headerlink" title="Subclasses in Pseudoclassical"></a>Subclasses in Pseudoclassical</h2><p>Let’s revisit the convertible example from part one of this post. When we were using the functional class style, we could create a subclass of Car as follows: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Convertible = <span class="function"><span class="keyword">function</span>(<span class="params">color, doors, seats</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> convertible = Car(color, doors, seats);</div><div class="line">  convertible.topUp = <span class="literal">true</span>;</div><div class="line"></div><div class="line">  convertible.lowerTop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.topUp = <span class="literal">false</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> convertible;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//Calling the function</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> littleRedConvertible = Convertible(<span class="string">'red'</span>, <span class="number">2</span>, <span class="number">2</span>);</div></pre></td></tr></table></figure>
<p>Translating this into the pseudoclassical style works like this:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Convertible = <span class="function"><span class="keyword">function</span>(<span class="params">color, doors, seats</span>) </span>&#123;</div><div class="line">  Car.call(<span class="keyword">this</span>, color, doors, seats);</div><div class="line">  <span class="keyword">this</span>.topUp = <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Convertible.prototype = <span class="built_in">Object</span>.create(Car.prototype);</div><div class="line">Convertible.prototype.constructor = Convertible;</div><div class="line"></div><div class="line">Convertible.prototype.lowerTop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.topUp = <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Calling the function</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> littleRedConvertible = <span class="keyword">new</span> Convertible(<span class="string">'red'</span>, <span class="number">2</span>, <span class="number">2</span>);</div></pre></td></tr></table></figure></p>
<p>Using call with our invocation of Car binds the keyword this to the object instance created by <code>new Convertible</code> calls. Another difference to note from the subclass shown above is we are delegating failed lookups to <code>Car.prototype</code> by using <code>Object.create</code>, which allows us to take advantage of the memory optimizations that come with the pseudoclassical style. Finally, we have to set Convertible’s constructor to be Convertible. When we called <code>Object.create</code> it set Convertible’s constructor to Car. If we were to have subclasses of Convertible, the prototype chain would not work correctly if we did not make sure that Convertible’s constructor is assigned correctly.</p>
<h3 id="Go-Forth-and-Instatiate"><a href="#Go-Forth-and-Instatiate" class="headerlink" title="Go Forth and Instatiate"></a>Go Forth and Instatiate</h3><p>The takeaway here is that functional Class instatiation gives you intuitive, readable code, but if you have to make tons of objects, go with Pseudoclassical instatiation. And if you fear Pseudoclassical because you don’t like <code>this</code>, rest easy, a post is forthcomming to clear that up.</p>

      
    </div>
    
    
      <footer class="article-footer">
        
      </footer>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/10/05/this-not-that/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-title"><span>&lt;</span>&nbsp;
        
          This, not That
        
      </div>
    </a>
  
  
    <a href="/2016/09/23/recursion/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">A Tale of Two Recursions&nbsp;<span>&gt;</span></div>
    </a>
  
</nav>

  
</article>




<div class="share_addthis">
  <div class="sharing addthis_toolbox share">
    <a class="addthis_button_facebook_like"></a>
    <a class="addthis_button_tweet"></a>
    <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-560c64c35486b3d4" async="async"></script>
</div>





</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Ivey Topaz&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    

<script src="/js/jquery.min.js"></script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>

</html>
